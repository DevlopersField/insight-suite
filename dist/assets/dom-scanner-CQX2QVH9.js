function p(s,e){const o=document.querySelector(`meta[${s}="${e}"]`);return(o==null?void 0:o.getAttribute("content"))??""}function h(){var i;const s=document.title??"",e=p("name","description"),o=((i=document.querySelector('link[rel="canonical"]'))==null?void 0:i.href)??"",n=p("name","robots")||"index, follow",t=p("name","author"),c=document.documentElement.lang??"",r=document.querySelector("meta[charset]"),a=(r==null?void 0:r.getAttribute("charset"))??"UTF-8",l=p("name","viewport");return{url:window.location.href,title:s,titleLength:s.length,description:e,descriptionLength:e.length,canonical:o,robots:n,author:t,language:c,charset:a,viewport:l}}function f(){const s=document.querySelectorAll("h1, h2, h3, h4, h5, h6");return Array.from(s).map((e,o)=>({tag:e.tagName,text:(e.textContent??"").trim().slice(0,200),order:o+1}))}function d(){const s=document.body?document.body.querySelectorAll("img"):document.querySelectorAll("img");return Array.from(s).map(e=>{var c;const o=e.src||e.getAttribute("data-src")||"";let n;try{const r=performance.getEntriesByName(o)[0];r&&r.encodedBodySize>0?n=r.encodedBodySize:r&&r.transferSize>0&&(n=r.transferSize)}catch{}let t="unknown";try{const r=e.currentSrc||o;if(!r)t="none";else if(r.startsWith("data:")){const a=r.match(/^data:image\/([a-zA-Z0-9+-]+);/);t=a?a[1].split("+")[0]:"data"}else{const a=[/\.(webp|avif|png|jpg|jpeg|svg|gif|ico|bmp)(?:\?|#|$)/i,/[?&](?:format|fm|ext|type|output)=([^&?#]+)/i,/\/(webp|avif|png|jpg|jpeg|svg|gif|ico|bmp)(?:\/|$)/i];for(const l of a){const i=r.match(l);if(i&&i[1]){t=i[1].toLowerCase();break}}if(t==="unknown"){const l=e.closest("picture");if(l){const i=l.querySelector("source");i&&i.type&&(t=((c=i.type.split("/")[1])==null?void 0:c.split("+")[0].toLowerCase())||"unknown")}}if(t==="unknown"){const l=["webp","avif","png","jpg","jpeg","svg","gif","ico","bmp"],i=r.toLowerCase();for(const u of l)if(new RegExp(`\\b${u}\\b|\\.${u}`,"i").test(i)){t=u;break}}}}catch{t="err"}return t==="jpeg"&&(t="jpg"),t==="unknown"&&(t="img"),{src:o,alt:e.alt??"",title:e.title??"",width:e.naturalWidth||e.width||0,height:e.naturalHeight||e.height||0,type:t||"img",size:n}})}function m(){const s=document.querySelectorAll("a[href]"),e=window.location.hostname;return Array.from(s).map(o=>{const n=o;let t=!1;try{t=new URL(n.href,window.location.href).hostname!==e}catch{}return{href:n.href,text:(n.textContent??"").trim().slice(0,120),rel:n.rel??"",isExternal:t}})}function y(){return{ogTitle:p("property","og:title"),ogDescription:p("property","og:description"),ogImage:p("property","og:image"),ogUrl:p("property","og:url"),ogType:p("property","og:type"),twitterCard:p("name","twitter:card"),twitterTitle:p("name","twitter:title"),twitterDescription:p("name","twitter:description"),twitterImage:p("name","twitter:image"),twitterSite:p("name","twitter:site")}}function g(){const s=document.querySelectorAll("iframe"),e=[];return s.forEach(n=>{const t=n.src||"";if(t.includes("youtube.com")||t.includes("youtu.be")){let c="";try{c=new URL(t).pathname.split("/").pop()||""}catch{}e.push({type:"youtube",id:c,url:t,hasSchema:!1})}else if(t.includes("vimeo.com")){let c="";try{c=new URL(t).pathname.split("/").pop()||""}catch{}e.push({type:"vimeo",id:c,url:t,hasSchema:!1})}}),w()&&e.forEach(n=>n.hasSchema=!0),e}function w(){const s=document.querySelectorAll('script[type="application/ld+json"]');for(const e of Array.from(s))try{const o=e.textContent||"";if(o.includes("VideoObject")){const n=JSON.parse(o);if((Array.isArray(n)?n:[n]).some(c=>c["@type"]==="VideoObject"||Array.isArray(c["@graph"])&&c["@graph"].some(r=>r["@type"]==="VideoObject")))return!0}}catch{}return!1}function S(){const s=document.querySelectorAll('script[type="application/ld+json"]'),e=[];return s.forEach(o=>{try{const n=o.textContent||"",t=JSON.parse(n);(Array.isArray(t)?t:[t]).forEach(r=>{const a=r["@type"]||"unknown",l=[],i=[];a==="Article"||a==="NewsArticle"||a==="BlogPosting"?(r.headline||l.push("Missing required property 'headline'"),r.image||i.push("Missing property 'image'")):a==="Product"?(r.name||l.push("Missing required property 'name'"),r.offers||i.push("Missing property 'offers'")):a==="Organization"&&(r.name||l.push("Missing required property 'name'"),r.url||i.push("Missing property 'url'")),e.push({type:Array.isArray(a)?a.join(", "):a,data:r,isValid:l.length===0,errors:l,warnings:i})})}catch{}}),e}function b(){const s=h(),e=f(),o=d(),n=m(),t=y(),c=g(),r=S();return{...s,headers:e,images:o,links:n,social:t,videos:c,schemas:r}}export{h as scanBasicSEO,b as scanDOM,f as scanHeaders,d as scanImages,m as scanLinks,S as scanSchemas,y as scanSocialTags,g as scanVideos};

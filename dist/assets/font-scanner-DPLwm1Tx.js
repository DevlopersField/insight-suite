function u(t){return`https://fonts.google.com/specimen/${encodeURIComponent(t.trim())}`}function h(t){try{const l=new URL(t),n=[],s=l.searchParams.getAll("family");for(const r of s){const o=r.split(":")[0].replace(/\+/g," ").trim();o&&n.push(o)}if(n.length===0){const r=l.searchParams.get("family");if(r)for(const o of r.split("|")){const e=o.split(":")[0].replace(/\+/g," ").trim();e&&n.push(e)}}return n}catch{return[]}}function g(){const t=new Map,l=document.querySelectorAll('link[href*="fonts.googleapis.com"]');for(const n of Array.from(l)){const s=n.href,r=h(s);for(const o of r)t.has(o)||t.set(o,{family:o,source:"google",weights:[],styles:["normal"],url:u(o),cssUrl:s})}return t}function p(){const t=new Map,l=document.querySelectorAll('link[href*="use.typekit.net"]');for(const n of Array.from(l)){const s=n.href;t.set(`typekit:${s}`,{family:"Adobe Typekit Font",source:"typekit",weights:[],styles:[],url:"https://fonts.adobe.com/",cssUrl:s})}return t}function d(){const t=new Map;if(!document.fonts)return t;try{document.fonts.forEach(l=>{const n=l.family.replace(/^["']|["']$/g,"").trim();if(!n)return;const s=t.get(n)||{family:n,weights:[],styles:[]},r=l.weight||"400",o=l.style||"normal";s.weights.includes(r)||s.weights.push(r),s.styles.includes(o)||s.styles.push(o),t.set(n,s)})}catch{}return t}function w(){const t=new Map;try{for(const l of Array.from(document.styleSheets)){let n;try{n=l.cssRules}catch{continue}for(const s of Array.from(n))if(s instanceof CSSFontFaceRule){const r=s.style.getPropertyValue("font-family").replace(/^["']|["']$/g,"").trim(),o=s.style.getPropertyValue("src"),e=s.style.getPropertyValue("font-weight")||"400",i=s.style.getPropertyValue("font-style")||"normal";if(!r)continue;const c=t.get(r);if(c)c.weights.includes(e)||c.weights.push(e),c.styles.includes(i)||c.styles.push(i);else{let a="custom",f=null;o.includes("fonts.gstatic.com")||o.includes("fonts.googleapis.com")?a="google":(o.includes("typekit")||o.includes("use.typekit.net"))&&(a="typekit");const y=o.match(/url\(["']?([^"')]+)["']?\)/);if(y&&(f=y[1],f&&!f.startsWith("data:")&&!f.startsWith("http")))try{const m=l.href||document.location.href;f=new URL(f,m).href}catch{}t.set(r,{family:r,source:a,weights:[e],styles:[i],url:a==="google"?u(r):null,cssUrl:f})}}}}catch{}return t}function S(){const t=new Map,l=[document.body,document.querySelector("h1"),document.querySelector("h2"),document.querySelector("p"),document.querySelector("a"),document.querySelector("button")].filter(Boolean);for(const n of l)try{const s=getComputedStyle(n),r=s.fontFamily;if(!r)continue;const o=r.split(",").map(e=>e.trim().replace(/^["']|["']$/g,""));for(const e of o){if(!e||t.has(e))continue;const c=(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"].includes(e.toLowerCase()),"system");t.set(e,{family:e,source:c,weights:[s.fontWeight||"400"],styles:[s.fontStyle||"normal"],url:null,cssUrl:null})}}catch{}return t}const k=new Set(["Inter","Roboto","Open Sans","Lato","Montserrat","Poppins","Raleway","Oswald","Source Sans Pro","Source Sans 3","Nunito","Playfair Display","Merriweather","Ubuntu","Noto Sans","PT Sans","Rubik","Work Sans","Fira Sans","Quicksand","Barlow","Mulish","DM Sans","Outfit","Space Grotesk","Plus Jakarta Sans","Manrope","JetBrains Mono","Fira Code","Source Code Pro","IBM Plex Sans","IBM Plex Mono","Libre Franklin","Crimson Text","Bitter","Josefin Sans","Cabin","Karla","Exo 2","Archivo","Overpass","Sora","Lexend","Geist"]);function F(){const t=new Map,l=g(),n=p(),s=w(),r=d(),o=S();for(const[e,i]of l)t.set(e,i);for(const[e,i]of n)t.set(e,i);for(const[e,i]of s)if(t.has(e)){const c=t.get(e);for(const a of i.weights)c.weights.includes(a)||c.weights.push(a);for(const a of i.styles)c.styles.includes(a)||c.styles.push(a)}else t.set(e,i);for(const[e,i]of r){const c=t.get(e);if(c){for(const a of i.weights||[])c.weights.includes(a)||c.weights.push(a);for(const a of i.styles||[])c.styles.includes(a)||c.styles.push(a)}}for(const[e,i]of o)t.has(e)||(k.has(e)&&(i.source="google",i.url=u(e)),t.set(e,i));return Array.from(t.values())}export{F as scanFonts};
